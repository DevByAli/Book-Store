<button mat-icon-button [matMenuTriggerFor]="notification">
  <mat-icon [matBadge]="notificaionCount" matBadgeColor="warn"
    >notifications</mat-icon
  >
</button>

<mat-menu #notification xPosition="before" (click)="$event.stopPropagation()">
  <div class="d-inline-block" (click)="onMarkAllNotificationsAsRead()">
    <button mat-button *ngIf="notifications.length > 0">
      Mark all as read
    </button>
  </div>
  <mat-divider *ngIf="notifications.length > 0"></mat-divider>
  <mat-list class="notification-list">
    @for (notification of notifications; track $index) {
    <mat-list-item>
      <div
        matListItemIcon
        class="me-4"
        style="cursor: pointer"
        (click)="onNotificationItem(notification.orderId)"
      >
        <ng-container *ngIf="isAdmin; else userOrderImage">
          <img
            [src]="notification.avatar"
            class="user-img"
            *ngIf="notification.avatar"
          />

          <mat-icon
            class="my-auto mx-2"
            matListItemIcon
            *ngIf="!notification.avatar"
            >account_circle</mat-icon
          >
        </ng-container>

        <ng-template #userOrderImage>ðŸ“¦</ng-template>
      </div>

      <div matListItemTitle *ngIf="isAdmin; else userOrderTitle">
        <strong>{{ notification.username }}</strong> made new order
      </div>

      <ng-template matListItemTitle #userOrderTitle>{{
        notification.type === "NO"
          ? "Your order has been created."
          : "Status of your order changed."
      }}</ng-template>

      <div matListItemLine>
        {{ notification.createdAt | date : "short" }}
      </div>
    </mat-list-item>
    <mat-divider></mat-divider>
    }@empty {
    <mat-list-item>
      <p>No notification ðŸ””</p>
    </mat-list-item>
    }
  </mat-list>
</mat-menu>
